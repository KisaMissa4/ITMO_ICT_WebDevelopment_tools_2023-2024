# База данных проекта: описание моделей и связей

Данная база данных построена с использованием `PostgreSQL`, развернутого в Docker. Для удобного управления моделями
используется библиотека `SQLModel`, которая является ORM-оберткой на базе `Pydantic` и `SQLAlchemy`. Это позволяет использовать
типы данных и валидацию данных от Pydantic, одновременно предлагая функционал, характерный для SQLAlchemy ORM.

## Основные модели

### 1. **Project (Проект)**

Модель `Project` представляет собой основной элемент, описывающий проект, содержащий следующие поля:

- `title` — название проекта (строка).
- `description` — необязательное описание проекта (строка).
- `is_active` — булево поле, обозначающее, активен проект или нет (по умолчанию `False`).
- `start_date` — дата начала проекта (тип `datetime`).
- `end_date` — необязательная дата окончания проекта (тип `datetime`).
- `creator_id` — идентификатор создателя проекта, который ссылается на модель `User` через внешний ключ (тип `int`).

**Связи:**

- `creator` — связь `One-to-Many` с моделью `User`, где один пользователь может создать несколько проектов.
- `members` — связь `One-to-Many` с промежуточной моделью `ProjectUser`, которая определяет, какие пользователи участвуют в
  проекте.
- `tasks` — связь `One-to-Many` с моделью `Task`, представляющей задачи, связанные с проектом.

### 2. **ProjectUser (Пользователи проектов)**

Промежуточная модель `ProjectUser` описывает участие пользователей в проектах. Она содержит следующие поля:

- `project_id` — идентификатор проекта (тип `int`), внешний ключ, ссылающийся на модель `Project`.
- `user_id` — идентификатор пользователя (тип `int`), внешний ключ, ссылающийся на модель `User`.
- `role` — строка, указывающая роль пользователя в проекте (например, "менеджер", "разработчик").

**Связи:**

- `project` — связь `Many-to-One` с моделью `Project`.
- `user` — связь `Many-to-One` с моделью `User`.

### 3. **Skill (Навык)**

Модель `Skill` описывает навыки, которые могут быть присвоены пользователям:

- `name` — название навыка (тип `str`).
- `description` — необязательное описание навыка (тип `str`).

**Связи:**

- `user_skills` — связь `One-to-Many` с промежуточной моделью `UserSkill`, описывающей, какие пользователи обладают этим
  навыком и на каком уровне.

### 4. **Task (Задача)**

Модель `Task` описывает задачи, связанные с проектом:

- `name` — название задачи (тип `str`).
- `description` — необязательное описание задачи (тип `str`).
- `status` — строка, описывающая статус задачи (например, "в работе", "завершено").
- `due_date` — необязательная дата завершения задачи (тип `datetime`).
- `project_id` — внешний ключ, ссылающийся на проект (тип `int`).
- `assignee_id` — внешний ключ, ссылающийся на пользователя, которому назначена задача (тип `int`).

**Связи:**

- `assignee` — связь `Many-to-One` с моделью `User`, представляющая пользователя, которому назначена задача.
- `project` — связь `Many-to-One` с моделью `Project`, обозначающая, к какому проекту относится задача.

### 5. **User (Пользователь)**

Модель `User` описывает пользователей системы:

- `username` — уникальное имя пользователя (тип `str`), индексированное.
- `password` — пароль пользователя (тип `str`).
- `first_name` — необязательное поле для имени пользователя (тип `str`).
- `last_name` — необязательное поле для фамилии пользователя (тип `str`).
- `email` — необязательное поле для электронной почты пользователя (тип `str`).
- `about` — необязательное поле для описания пользователя (тип `str`).

**Связи:**

- `user_skills` — связь `One-to-Many` с моделью `UserSkill`, представляющая навыки пользователя.
- `created_projects` — связь `One-to-Many` с моделью `Project`, обозначающая проекты, созданные пользователем.
- `members` — связь `One-to-Many` с моделью `ProjectUser`, описывающая участие пользователя в различных проектах.
- `assigned_tasks` — связь `One-to-Many` с моделью `Task`, представляющая задачи, назначенные пользователю.

### 6. **UserSkill (Навыки пользователя)**

Промежуточная модель `UserSkill` описывает связь между пользователем и его навыками:

- `user_id` — идентификатор пользователя, внешний ключ на модель `User`.
- `skill_id` — идентификатор навыка, внешний ключ на модель `Skill`.
- `level` — уровень владения навыком (тип `int`, по умолчанию `1`).

**Связи:**

- `user` — связь `Many-to-One` с моделью `User`.
- `skill` — связь `Many-to-One` с моделью `Skill`.

## Описание связей между моделями

Связи в базе данных реализованы через модель `SQLModel`, которая поддерживает как однонаправленные, так и двунаправленные
связи:

1. **One-to-Many (Один ко многим):**
    - Один проект может иметь много задач (`Project` -> `Task`).
    - Один пользователь может создать несколько проектов (`User` -> `Project`).
    - Один пользователь может быть участником нескольких проектов через модель `ProjectUser` (`User` -> `ProjectUser`).

2. **Many-to-One (Многие к одному):**
    - Несколько задач могут быть назначены одному пользователю (`Task` -> `User`).
    - Несколько навыков могут принадлежать одному пользователю через модель `UserSkill` (`UserSkill` -> `User`).

3. **Many-to-Many (Многие ко многим):**
    - Модель `ProjectUser` реализует связь между проектами и пользователями. Один пользователь может участвовать в нескольких
      проектах, и один проект может включать нескольких пользователей.
    - Модель `UserSkill` реализует связь между пользователями и их навыками, где один пользователь может обладать несколькими
      навыками, а один навык может быть у нескольких пользователей.

## Особенности использования SQLModel

`SQLModel` объединяет в себе возможности `Pydantic` и `SQLAlchemy`, что делает его мощным инструментом для работы с базой
данных в асинхронных веб-приложениях и API. Использование Postgres в Docker предоставляет масштабируемую и отказоустойчивую
базу данных для приложения.

### Преимущества:

- Удобная валидация данных благодаря `Pydantic`.
- Гибкость и производительность за счет `SQLAlchemy ORM`.
- Простота управления асинхронными запросами к базе данных.
- Легкость создания сложных запросов и работы с транзакциями.
